<!DOCTYPE html>
<html>

<head>
    <title>Recycle.eg</title>
    <link rel="stylesheet" href="../styles/recycle_style.css">

</head>

<body>


    <header id="recycle_header">

        <!-- scripts -->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <script src="../scripts/user_info.js"></script>

        <a href="../../index.html"><img src="../img/logo.png" width="150"></a>
        <ul id="recycle_header_buttons">
            <li><a href="pontosdedescartes.html">Ponto de descarte</a></li>
            <li><a href="login.html">Perfil</a></li>
        </ul>
    </header>
    <section id="recycle_mainbody" style="margin-bottom: 50px;">
        <h1 id="recycle_h1" class="data_user_fname">
            Usuário
        </h1>
        <script class="jsbin" src="https://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>


        <!-- Upload de foto -->
        <div class="file-upload">
            <button class="file-upload-btn" type="button" onclick="$('.file-upload-input').trigger( 'click' )">Add
                Image</button>

            <div class="image-upload-wrap">
                <input class="file-upload-input" type='file' onchange="readURL(this);" accept="image/*" />
                <div class="drag-text">
                    <h3>Selecione uma imagem</h3>
                </div>
            </div>
            <div class="file-upload-content">
                <img class="file-upload-image" src="#" alt="your image" />
                <div class="image-title-wrap">
                </div>
            </div>
        </div>


        <!-- Documento original de: Milena Barreira -->
        <!-- Revisão: Pedro Pereira Lourenço -->
        <!-- Mudanças: id's trocada para os valores definidos dentro do arquivo de estilo recycle_style.css. 
            forms modificada para seguir o estilo do site, porém mantendo as implementações previamente adicionadas
            por Milena Barreia. Alteração do script: parte.js para user_info.js, alterando os nomes das funções e adptando para
            jquery -->
        <form id="login-form">
            <h2 id="recycle_h2" style="width: 100px; padding-right: 50px;">Nome Completo</h2>
            <input id="recycle_nome" class="nome" placeholder="Nome" required="" value="">
            <h2 id="recycle_h2" style="width: 100px; padding-right: 50px;">Login</h2>
            <input id="recycle_sobrenome" class="login" placeholder="sobrenome" required="" value="">
            <!-- <h2 id="recycle_h2" style="width: 100px; padding-right: 50px;">Sexo</h2> -->
            <!-- <select id="recylce_select_fat" name="select">
                <option value="1">Masculino</option>
                <option value="2">Feminino</option>
                <option value="3">Outro</option>
                <option value="4">Prefiro não dizer</option>
            </select> -->
            <h2 id="recycle_h2">email</h2>
            <input id="recycle_input_normal" class="input_data_user_email" placeholder="email" required="" value="">
            <h2 id="recycle_h2">CEP</h2>
            <input id="recycle_input_normal" class="input_data_user_cep" placeholder="apenas números" required=""
                value="">
            <button id="recycle_button_1" class="search" onclick="return false">Pesquisar</button>
            <ul class="recyle_ul_standard">
                <li>
                    <p id="recycle_p" style="padding-right: 10px; width: 50px;">Cidade</p>
                    <input id="recycle_input_normal" class="input_data_user_city" placeholder="cidade" required=""
                        value="Belo Horizonte">
                </li>
                <li>
                    <p id="recycle_p" style="padding-right: 10px; width: 50px;">Estado</p>
                    <input id="recycle_input_normal" class="input_data_user_state" placeholder="estado" required=""
                        value="Minas Gerais">
                </li>
                <li>
                    <p id="recycle_p" style="padding-right: 10px; width: 50px;">Rua</p>
                    <input id="recycle_input_normal" class="input_data_user_strt" placeholder="rua" required=""
                        value="">
                </li>
                <li>
                    <p id="recycle_p" style="padding-right: 10px; width: 50px;">Bairro</p>
                    <input id="recycle_input_normal" class="input_data_user_dtrct" placeholder="bairro" required=""
                        value="">
                </li>
            </ul>
            <button id="recycle_button" class="submit" style="height: 50px; width: 100px;">Confirmar</button> <button
                id="recycle_button_red" class="cancel" onclick="location.href='dashboard.html'; return false"
                style="height: 50px; width: 100px;">Cancelar</button>
        </form>
    </section>
    <footer id="recycle_footer">
        <p style="font-family: Arial, Helvetica, sans-serif; color: white; font-size: 12px;">All rights reserved</p>
    </footer>



    </script>

    <script>
        $(".nome").val(usuarioCorrente.nome);
        $(".login").val(usuarioCorrente.login);
        $(".input_data_user_email").val(usuarioCorrente.email);
        $(".input_data_user_strt").val(usuarioCorrente.rua);
        $(".input_data_user_dtrct").val(usuarioCorrente.bairro);
        var nomes = usuarioCorrente.nome.split(" ");

        console.log(nomes);


        $(".submit").bind("click", onClick);
        function onClick() {
            db_usuarios.usuarios.forEach(element => {
                if (element.id == usuarioCorrente.id) {
                    element.nome = $(".nome").val();
                    element.login = $(".login").val();
                    element.email = $(".input_data_user_email").val();
                    element.rua = $(".input_data_user_strt").val();
                    element.bairro = $(".input_data_user_dtrct").val();
                    localStorage.setItem("db_usuarios", JSON.stringify(db_usuarios));
                    $(".nome").val(element.nome);
                    $(".login").val(element.login);
                    $(".input_data_user_email").val(element.email);
                    $(".input_data_user_strt").val(element.rua);
                    $(".input_data_user_dtrct").val(element.bairro);
                    var nomes = element.nome.split(" ");
                    usuarioCorrente = element;
                    sessionStorage.setItem("usuarioCorrente", JSON.stringify(element));
                }
                console.log(element)
            });
            console.log(usuarioCorrente.nome);
            console.log(usuarioCorrente.login);
            console.log(usuarioCorrente.email);
            console.log(usuarioCorrente.rua);
            console.log(usuarioCorrente.bairro);
        }




        // Declara uma função para processar o formulário de login
         // Declara uma função para processar o formulário de login

       // function processaFormLogin(event) {
            // Cancela a submissão do formulário para tratar sem fazer refresh da tela
          //  event.preventDefault();

            // Obtem os dados de login e senha a partir do formulário de login
            //var username = document.getElementById('recycle_nome').value;
           // var password = document.getElementById('recycle_sobrenome').value;

            // Valida login e se estiver ok, redireciona para tela inicial da aplicação
           // resultadoLogin = loginUser(username, password);

        //}



       // function salvaLogin(event) {
            // Cancela a submissão do formulário para tratar sem fazer refresh da tela
           // event.preventDefault();

            // Obtem os dados do formulário
           // let login = document.getElementById('recycle_nome').value;
           // let nome = document.getElementById('recycle_sobrenome').value;
           // let bairro = document.getElementById('recycle_bairro').value;
            //let rua = document.getElementById('recycle_cep').value;
            //let email = document.getElementById('recycle_email').value;
            //let senha = document.getElementById('recycle_cidade').value;
            //let senha2 = document.getElementById('recycle_rua').value;
            // Adiciona o usuário no banco de dados
            //addUser(nome, login, bairro, rua, email, senha);
            //alert('Dados atualizados com sucesso. ');
            // Oculta a div modal do login
            //document.getElementById ('loginModal').style.display = 'none';
        //    $('#loginModal').modal('hide');
       // }






    </script>

    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
        integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
        integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
        crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
        integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
        crossorigin="anonymous"></script>

</body>

</html>